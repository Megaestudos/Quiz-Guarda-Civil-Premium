<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Quiz Guarda Civil ‚Äî Simulados</title>

  <style>
    :root{
      --bg1:#0d2b46;
      --bg2:#0f3d63;
      --card: rgba(255,255,255,.08);
      --card2: rgba(255,255,255,.10);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --accent:#16f3c0;
      --accent2:#00d7ff;
      --danger:#ff5a7a;
      --shadow: 0 16px 40px rgba(0,0,0,.35);
      --radius: 18px;
      --radius2: 22px;

      --navH: 82px;        /* altura do menu inferior */
      --safeTop: env(safe-area-inset-top, 0px);
      --safeBottom: env(safe-area-inset-bottom, 0px);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 800px at 30% 10%, rgba(0,215,255,.18), transparent 55%),
        radial-gradient(900px 700px at 75% 30%, rgba(22,243,192,.14), transparent 55%),
        linear-gradient(180deg, var(--bg2), var(--bg1));
      overflow:hidden; /* quem rola √© o container interno */
    }

    /* ====== APP LAYOUT (altura est√°vel no celular) ====== */
    .app{
      height: 100dvh; /* melhor que 100vh no mobile */
      padding-top: var(--safeTop);
      padding-bottom: calc(var(--navH) + var(--safeBottom));
      display:flex;
      flex-direction:column;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 10px 14px 8px;
    }
    .topbar .btn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      background: rgba(255,255,255,.10);
      border:1px solid var(--stroke);
      border-radius: 12px;
      color: var(--text);
      font-weight: 650;
      letter-spacing:.2px;
      box-shadow: 0 10px 28px rgba(0,0,0,.22);
      user-select:none;
    }
    .topbar .btn:active{ transform: translateY(1px); }
    .bell{
      width:44px;height:44px;
      border-radius: 12px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.10);
      border:1px solid var(--stroke);
      box-shadow: 0 10px 28px rgba(0,0,0,.22);
      user-select:none;
    }

    /* ====== BLOCO SUPERIOR (o que voc√™ quer esconder no Simulado no celular) ====== */
    #headerPanel{
      margin: 10px 14px 10px;
      padding: 16px 16px;
      border-radius: var(--radius2);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
    }
    .brand h1{
      font-size: 26px;
      margin: 0;
      letter-spacing:.2px;
    }
    .brand p{
      margin: 6px 0 0;
      color: var(--muted);
      font-weight: 550;
    }

    .controls{
      margin-top: 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }
    .controlGroup{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .pill{
      min-width:72px;
      padding: 12px 14px;
      border-radius: 14px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.10);
      color: var(--text);
      font-weight: 750;
      text-align:center;
      user-select:none;
    }
    .pill.small{ min-width: 86px; }
    .pill.icon{
      min-width: 58px;
      display:grid; place-items:center;
      font-weight:900;
    }

    /* ====== CONTENT AREA ====== */
    .content{
      flex:1;
      min-height:0; /* importante pra scroll funcionar direito */
      padding: 0 14px 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
      overflow:hidden;
    }

    .screen{
      flex:1;
      min-height:0;
      display:none;
      overflow:hidden;
    }
    .screen.active{ display:flex; flex-direction:column; gap:12px; }

    /* ====== CARD BASE ====== */
    .card{
      border-radius: var(--radius2);
      background: var(--card);
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
    }

    /* ====== SIMULADO LAYOUT ====== */
    .sim-top{
      padding: 12px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }

    .row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    .select{
      flex: 1;
      min-width: 170px;
      padding: 12px 14px;
      border-radius: 14px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.18);
      color: var(--text);
      font-weight: 700;
      outline:none;
    }

    .startBtn{
      padding: 12px 16px;
      border-radius: 14px;
      border: 0;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      color:#062231;
      font-weight: 900;
      letter-spacing:.4px;
      box-shadow: 0 16px 30px rgba(0,0,0,.28);
      user-select:none;
    }
    .startBtn:active{ transform: translateY(1px); }

    .progressWrap{
      padding: 0 12px 12px;
      display:flex;
      align-items:center;
      gap:12px;
    }
    .progressLabel{
      color: var(--muted);
      font-weight: 750;
      min-width: 90px;
    }
    .progressBar{
      flex: 1;
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border: 1px solid var(--stroke);
      overflow:hidden;
    }
    .progressFill{
      height:100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius: 999px;
      transition: width .25s ease;
    }
    .progressCount{
      font-weight: 900;
      color: var(--text);
      min-width: 54px;
      text-align:right;
    }

    /* √Årea do simulado: pergunta + alternativas (scroll s√≥ aqui se precisar) */
    .sim-body{
      flex:1;
      min-height:0;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      gap: 12px;
      padding: 12px;
    }

    .questionCard{
      padding: 14px;
      border-radius: 18px;
      background: rgba(0,0,0,.18);
      border: 1px solid var(--stroke);
    }
    .qTitle{
      margin:0 0 8px;
      font-size: 14px;
      color: var(--muted);
      font-weight: 800;
      letter-spacing:.2px;
    }
    .qText{
      margin:0;
      font-size: 20px;
      line-height:1.25;
      font-weight: 900;
    }

    .options{
      flex:1;
      min-height:0;
      overflow:auto;
      padding-right: 2px;
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .opt{
      padding: 14px 14px;
      border-radius: 18px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.08);
      font-weight: 750;
      line-height:1.2;
      user-select:none;
    }
    .opt:active{ transform: translateY(1px); }
    .opt.selected{
      outline: 2px solid rgba(22,243,192,.55);
      background: rgba(22,243,192,.12);
    }
    .opt.correct{
      outline: 2px solid rgba(22,243,192,.70);
      background: rgba(22,243,192,.16);
    }
    .opt.wrong{
      outline: 2px solid rgba(255,90,122,.70);
      background: rgba(255,90,122,.14);
    }

    .sim-footer{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      padding: 0 12px 12px;
    }
    .points{
      font-weight: 950;
      color: var(--accent);
      font-size: 18px;
    }
    .nextBtn{
      flex: 1;
      padding: 14px 16px;
      border-radius: 16px;
      border: 0;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      color:#062231;
      font-weight: 950;
      letter-spacing:.5px;
      user-select:none;
    }
    .nextBtn:active{ transform: translateY(1px); }

    /* ====== NAV INFERIOR FIXO ====== */
    .nav{
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: calc(var(--navH) + var(--safeBottom));
      padding: 10px 14px calc(10px + var(--safeBottom));
      background: rgba(7,26,42,.72);
      border-top: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      display:flex;
      gap: 10px;
      align-items:center;
      justify-content:space-between;
    }

    .nav .item{
      flex:1;
      height: 56px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 2px;
      color: var(--muted);
      user-select:none;
      font-weight: 750;
      font-size: 12px;
    }
    .nav .item.active{
      color: var(--accent);
      background: rgba(22,243,192,.10);
      border-color: rgba(22,243,192,.22);
      box-shadow: 0 14px 26px rgba(0,0,0,.25);
    }
    .icon{
      font-size: 18px;
      line-height: 1;
    }

    /* ====== AQUI √â O PONTO CHAVE: no celular, ao entrar no Simulado, some o header ====== */
    @media (max-width: 820px){
      body.simulado-mobile-hide #headerPanel{
        display:none !important;
      }
      body.simulado-mobile-hide .content{
        padding-top: 2px;
      }
    }

    /* (opcional) anima√ß√£o suave quando for esconder via JS */
    .hideAnim{
      animation: fadeDown .18s ease both;
    }
    @keyframes fadeDown{
      from{ opacity:1; transform: translateY(0); }
      to{ opacity:0; transform: translateY(-8px); }
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- barra superior -->
    <div class="topbar">
      <div class="btn" id="menuBtn">‚ò∞ MENU</div>
      <div class="bell" title="Notifica√ß√µes">üîî</div>
    </div>

    <!-- BLOCO SUPERIOR (vai sumir no celular quando Simulado estiver ativo) -->
    <section id="headerPanel">
      <div class="brand">
        <div>
          <h1>Guarda Civil üëÆ‚Äç‚ôÇÔ∏è</h1>
          <p>Plataforma de Estudos Inteligente</p>
        </div>
      </div>

      <div class="controls">
        <div class="controlGroup">
          <div class="pill">A-</div>
          <div class="pill small">x1.00</div>
          <div class="pill">A+</div>
        </div>
        <div class="controlGroup">
          <div class="pill icon" title="√Åudio">üîä</div>
          <div class="pill icon" title="Tela cheia">‚õ∂</div>
        </div>
      </div>
    </section>

    <!-- conte√∫do -->
    <main class="content">
      <!-- IN√çCIO -->
      <section class="screen" id="screen-home">
        <div class="card" style="padding:16px;">
          <h2 style="margin:0 0 8px;">In√≠cio</h2>
          <p style="margin:0;color:var(--muted);font-weight:650;">
            Aqui voc√™ pode colocar seu painel inicial.
          </p>
        </div>
      </section>

      <!-- ESTUDO -->
      <section class="screen" id="screen-study">
        <div class="card" style="padding:16px;">
          <h2 style="margin:0 0 8px;">Estudo</h2>
          <p style="margin:0;color:var(--muted);font-weight:650;">
            Aqui voc√™ pode colocar sua √°rea de resumos / conte√∫dos.
          </p>
        </div>
      </section>

      <!-- SIMULADO -->
      <section class="screen active" id="screen-simulado">
        <div class="card">
          <div class="sim-top">
            <div class="row" style="flex:1;">
              <div style="font-weight:900;font-size:20px;">T√≥pico:</div>
              <select class="select" id="topicSelect">
                <option value="todos">Todos</option>
                <option value="lei9455">Lei 9.455/1997</option>
                <option value="const">Constitui√ß√£o</option>
              </select>
            </div>
            <button class="startBtn" id="startBtn">INICIAR</button>
          </div>

          <div class="progressWrap">
            <div class="progressLabel">Quest√µes:</div>
            <div class="progressBar"><div class="progressFill" id="progressFill"></div></div>
            <div class="progressCount" id="progressCount">0/0</div>
          </div>

          <div class="sim-body">
            <div class="questionCard">
              <div class="qTitle">Pergunta</div>
              <p class="qText" id="qText">Clique em INICIAR para come√ßar.</p>
            </div>

            <div class="options" id="options"></div>
          </div>

          <div class="sim-footer">
            <div class="points" id="points">Pontos: 0</div>
            <button class="nextBtn" id="nextBtn">PR√ìXIMA ‚ûú</button>
          </div>
        </div>
      </section>

      <!-- CART√ïES -->
      <section class="screen" id="screen-cards">
        <div class="card" style="padding:16px;">
          <h2 style="margin:0 0 8px;">Cart√µes</h2>
          <p style="margin:0;color:var(--muted);font-weight:650;">
            Aqui voc√™ pode colocar seus flashcards.
          </p>
        </div>
      </section>
    </main>
  </div>

  <!-- NAV INFERIOR -->
  <nav class="nav">
    <div class="item" data-tab="home">
      <div class="icon">üè†</div>
      <div>In√≠cio</div>
    </div>
    <div class="item" data-tab="study">
      <div class="icon">üìò</div>
      <div>Estudo</div>
    </div>
    <div class="item active" data-tab="simulado">
      <div class="icon">üéØ</div>
      <div>Simulado</div>
    </div>
    <div class="item" data-tab="cards">
      <div class="icon">üóÇÔ∏è</div>
      <div>Cart√µes</div>
    </div>
  </nav>

  <script>
    /* ========= 1) TROCA DE ABAS + ESCONDER HEADER NO SIMULADO (MOBILE) ========= */
    const screens = {
      home: document.getElementById('screen-home'),
      study: document.getElementById('screen-study'),
      simulado: document.getElementById('screen-simulado'),
      cards: document.getElementById('screen-cards'),
    };

    function setTab(tab){
      // ativa tela
      Object.keys(screens).forEach(k => {
        screens[k].classList.toggle('active', k === tab);
      });

      // ativa bot√£o no menu inferior
      document.querySelectorAll('.nav .item').forEach(el => {
        el.classList.toggle('active', el.dataset.tab === tab);
      });

      // regra: no CELULAR, no Simulado, esconder header
      const isMobile = window.matchMedia('(max-width: 820px)').matches;
      if(isMobile && tab === 'simulado'){
        document.body.classList.add('simulado-mobile-hide');
      }else{
        document.body.classList.remove('simulado-mobile-hide');
      }
    }

    document.querySelectorAll('.nav .item').forEach(el => {
      el.addEventListener('click', () => setTab(el.dataset.tab));
    });

    // tamb√©m reage a mudan√ßa de orienta√ß√£o / tamanho
    window.addEventListener('resize', () => {
      const current = document.querySelector('.nav .item.active')?.dataset.tab || 'simulado';
      setTab(current);
    });

    /* ========= 2) SIMULADO (exemplo funcional ‚Äî voc√™ pode plugar seu banco real) ========= */
    const qText = document.getElementById('qText');
    const optionsEl = document.getElementById('options');
    const startBtn = document.getElementById('startBtn');
    const nextBtn = document.getElementById('nextBtn');
    const pointsEl = document.getElementById('points');
    const progressFill = document.getElementById('progressFill');
    const progressCount = document.getElementById('progressCount');
    const topicSelect = document.getElementById('topicSelect');

    let points = 0;
    let currentIndex = 0;
    let currentList = [];
    let selected = null;
    let locked = false;

    const DB = [
      {
        topic: 'lei9455',
        q: 'Na Lei 9.455/1997, qual afirma√ß√£o est√° relacionada √† prote√ß√£o?',
        options: [
          'A) Regulado apenas por normas administrativas',
          'B) Mecanismos de apura√ß√£o e den√∫ncia por √≥rg√£os competentes',
          'C) Exclusivamente de compet√™ncia militar',
          'D) Depende de autoriza√ß√£o judicial pr√©via'
        ],
        correct: 1
      },
      {
        topic: 'lei9455',
        q: 'A Lei 9.455/1997 trata principalmente de:',
        options: [
          'A) Tortura',
          'B) Crimes ambientais',
          'C) Tr√¢nsito',
          'D) Licita√ß√µes'
        ],
        correct: 0
      },
      {
        topic: 'const',
        q: 'Na CF/88, seguran√ßa p√∫blica √© dever do(a):',
        options: [
          'A) Somente Uni√£o',
          'B) Somente Estados',
          'C) Estado, direito e responsabilidade de todos',
          'D) Apenas Munic√≠pios'
        ],
        correct: 2
      }
    ];

    function shuffle(arr){
      // Fisher-Yates
      for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function buildList(){
      const t = topicSelect.value;
      let list = DB.slice();
      if(t !== 'todos'){
        list = list.filter(x => x.topic === t);
      }
      return shuffle(list);
    }

    function updateProgress(){
      const total = currentList.length;
      const at = total ? (currentIndex + 1) : 0;
      progressCount.textContent = `${at}/${total}`;
      const pct = total ? Math.round((at / total) * 100) : 0;
      progressFill.style.width = pct + '%';
    }

    function renderQuestion(){
      locked = false;
      selected = null;
      optionsEl.innerHTML = '';

      if(!currentList.length){
        qText.textContent = 'Sem quest√µes para este t√≥pico. Selecione outro e clique em INICIAR.';
        progressFill.style.width = '0%';
        progressCount.textContent = '0/0';
        return;
      }

      const item = currentList[currentIndex];
      qText.textContent = item.q;
      updateProgress();

      item.options.forEach((txt, idx) => {
        const div = document.createElement('div');
        div.className = 'opt';
        div.textContent = txt;
        div.addEventListener('click', () => {
          if(locked) return;
          document.querySelectorAll('.opt').forEach(o => o.classList.remove('selected'));
          div.classList.add('selected');
          selected = idx;
        });
        optionsEl.appendChild(div);
      });

      // garante que o scroll das op√ß√µes volta pro topo
      optionsEl.scrollTop = 0;
    }

    function confirmAnswer(){
      if(locked) return true;
      if(selected === null) return false;

      locked = true;
      const item = currentList[currentIndex];
      const opts = [...document.querySelectorAll('.opt')];

      opts.forEach((el, idx) => {
        el.classList.remove('selected');
        if(idx === item.correct) el.classList.add('correct');
      });

      if(selected !== item.correct){
        opts[selected]?.classList.add('wrong');
      } else {
        points += 1;
        pointsEl.textContent = `Pontos: ${points}`;
      }
      return true;
    }

    startBtn.addEventListener('click', () => {
      points = 0;
      pointsEl.textContent = 'Pontos: 0';
      currentIndex = 0;
      currentList = buildList();
      renderQuestion();
    });

    nextBtn.addEventListener('click', () => {
      // primeiro clique: confirma resposta, segundo clique: avan√ßa
      if(!currentList.length) return;

      const ok = confirmAnswer();
      if(!ok) return;

      // se j√° est√° travado, avan√ßa
      if(currentIndex < currentList.length - 1){
        currentIndex++;
        renderQuestion();
      }else{
        qText.textContent = `Fim do simulado! ‚úÖ Voc√™ fez ${points} ponto(s).`;
        optionsEl.innerHTML = '';
        progressFill.style.width = '100%';
      }
    });

    // inicia no Simulado e j√° aplica a regra de esconder topo no mobile
    setTab('simulado');
  </script>
</body>
</html>
